---
// Feature Cards grid Section
// ------------
// Description: A grid of cards with feature information in a 4 column layout.

// Components
// - Layout
import Section from '../../ui/Section.astro'
import Row from '../../ui/Row.astro'
import Col from '../../ui/Col.astro'
// - UI
import Card from '../../ui/cards/FeatureCard.astro'
import Button from '../../ui/Button.astro'

// Content
// - Cards
import feature01 from '../../../assets/cards/iuss-pavia-logo.png'
import feature02 from '../../../assets/cards/3Logo3.svg'
import feature03 from '../../../assets/cards/feature-03.svg'
import feature04 from '../../../assets/cards/feature-04.svg'
import feature05 from '../../../assets/cards/feature-05.svg'
---

<Section id="features">
	<Row>
		<Col span="12" align="center" classes="mb-12 max-w-4xl mx-auto">
			<h2 class="text-pretty">Le Scuole</h2>
			<p class="pb-0 text-lg">
				Scopri le scuole che fanno parte della rete RIASISSU. Ogni scuola rappresenta
				un'eccellenza accademica e culturale in Italia.
			</p>
		</Col>
	</Row>
	<div
		x-data="{open : window.innerWidth >= 1024,
				toggle() {
				if (this.open) {
					return this.close()
					}
					this.open = true
						
						},
						close(focusAfter) {
							if (! this.open) return
			
							this.open = false
			
							focusAfter && focusAfter.focus()
						},
				init() {
					window.addEventListener('resize', () => {
						this.open = window.innerWidth >= 1024
					})
				}
            }"
		x-init="init()"
	>
		<Row classes="lg:mx-12">
			<Col span="4" classes="mx-12 lg:m-0 flex flex-col gap-6 ">
				<Card
					title="Collegio Internazionale di Venezia"
					subtitle="Città: Venezia"
					image={feature01}
					link="/scuole/venezia"
				/>

				<Card
					title="Scuola Normale Superiore di Pisa"
					subtitle="Città: Pisa"
					image={feature02}
					link="/scuole/pisa"
				/>

				<Card
					title="IUSS Scuola Universitaria Superiore di Pavia"
					subtitle="Città: Pavia"
					image={feature03}
					link="/scuole/pavia"
				/>

				<Card
					title="Scuola di Studi Superiori Carlo Urbani di Camerino"
					subtitle="Citta: Camerino"
					image={feature04}
					link="/scuole/camerino"
				/>
			</Col>

			<Col span="4" classes="mx-12 lg:m-0 flex flex-col gap-6">
				<div
					x-show="open"
					x-transition:enter="transition ease-out duration-300"
					x-transition:enter-start="opacity-0 transform scale-95"
					x-transition:enter-end="opacity-100 transform scale-100"
					x-transition:leave="transition ease-in duration-200"
					x-transition:leave-start="opacity-100 transform scale-100"
					x-transition:leave-end="opacity-0 transform scale-95"
					class="flex-1"
				>
					<Card
						title="Collegio Superiore di Bologna"
						subtitle="Città: Bologna"
						image={feature02}
						link="/scuole/bologna"
					/>
				</div>
				<div
					x-show="open"
					x-transition:enter="transition ease-out duration-300 delay-75"
					x-transition:enter-start="opacity-0 transform scale-95"
					x-transition:enter-end="opacity-100 transform scale-100"
					x-transition:leave="transition ease-in duration-200"
					x-transition:leave-start="opacity-100 transform scale-100"
					x-transition:leave-end="opacity-0 transform scale-95"
					class="flex-1"
				>
					<Card
						title="Scuola superiore ISUFI di Lecce"
						subtitle="Città: Lecce"
						image={feature03}
						link="/scuole/lecce"
					/>
				</div>
				<div
					x-show="open"
					x-transition:enter="transition ease-out duration-300 delay-150"
					x-transition:enter-start="opacity-0 transform scale-95"
					x-transition:enter-end="opacity-100 transform scale-100"
					x-transition:leave="transition ease-in duration-200"
					x-transition:leave-start="opacity-100 transform scale-100"
					x-transition:leave-end="opacity-0 transform scale-95"
					class="flex-1"
				>
					<Card
						title="Scuola di Studi Superiori 'Giacomo Leopardi' di Macerata"
						subtitle="Città: Macerata"
						image={feature03}
						link="/scuole/macerata"
					/>
				</div>
				<div
					x-show="open"
					x-transition:enter="transition ease-out duration-300 delay-225"
					x-transition:enter-start="opacity-0 transform scale-95"
					x-transition:enter-end="opacity-100 transform scale-100"
					x-transition:leave="transition ease-in duration-200"
					x-transition:leave-start="opacity-100 transform scale-100"
					x-transition:leave-end="opacity-0 transform scale-95"
					class="flex-1"
				>
					<Card
						title="Scuola di Studi Superiori Ferdinando Rossi di Torino"
						subtitle="Città: Torino"
						image={feature02}
						link="/scuole/torino"
					/>
				</div>
			</Col>
			<Col
				span="4"
				x-show="open"
				x-transition:enter="transition ease-out duration-300"
				x-transition:enter-start="opacity-0 transform translate-x-4"
				x-transition:enter-end="opacity-100 transform translate-x-0"
				x-transition:leave="transition ease-in duration-200"
				x-transition:leave-start="opacity-100 transform translate-x-0"
				x-transition:leave-end="opacity-0 transform translate-x-4"
				classes="mx-12 lg:m-0 flex flex-col gap-6 extra-cards"
			>
				<div
					x-show="open"
					x-transition:enter="transition ease-out duration-300 delay-75"
					x-transition:enter-start="opacity-0 transform scale-95"
					x-transition:enter-end="opacity-100 transform scale-100"
					x-transition:leave="transition ease-in duration-200"
					x-transition:leave-start="opacity-100 transform scale-100"
					x-transition:leave-end="opacity-0 transform scale-95"
					class="flex-1"
				>
					<Card
						title="Scuola Superiore Sant'Anna di Pisa"
						subtitle="Città: Pisa"
						image={feature04}
						link="/scuole/santanna"
					/>
				</div>
				<div
					x-show="open"
					x-transition:enter="transition ease-out duration-300 delay-150"
					x-transition:enter-start="opacity-0 transform scale-95"
					x-transition:enter-end="opacity-100 transform scale-100"
					x-transition:leave="transition ease-in duration-200"
					x-transition:leave-start="opacity-100 transform scale-100"
					x-transition:leave-end="opacity-0 transform scale-95"
					class="flex-1"
				>
					<Card
						title="Scuola Galileiana di Studi Superiori di Padova"
						subtitle="Città: Padova"
						image={feature05}
						link="/scuole/padova"
					/>
				</div>
				<div
					x-show="open"
					x-transition:enter="transition ease-out duration-300 delay-225"
					x-transition:enter-start="opacity-0 transform scale-95"
					x-transition:enter-end="opacity-100 transform scale-100"
					x-transition:leave="transition ease-in duration-200"
					x-transition:leave-start="opacity-100 transform scale-100"
					x-transition:leave-end="opacity-0 transform scale-95"
					class="flex-1"
				>
					<Card
						title="Scuola Superiore di Catania"
						subtitle="Città: Catania"
						image={feature05}
						link="/scuole/catania"
					/>
				</div>
				<div
					x-show="open"
					x-transition:enter="transition ease-out duration-300 delay-300"
					x-transition:enter-start="opacity-0 transform scale-95"
					x-transition:enter-end="opacity-100 transform scale-100"
					x-transition:leave="transition ease-in duration-200"
					x-transition:leave-start="opacity-100 transform scale-100"
					x-transition:leave-end="opacity-0 transform scale-95"
					class="flex-1"
				>
					<Card
						title="Scuola di Studi Superiori della Sapienza"
						subtitle="Città: Roma"
						image={feature03}
						link="/scuole/roma"
					/>
				</div>
			</Col>
		</Row>

		<Row classes="">
			<Col span="12" classes="text-center">
				<div class="mt-6 flex justify-center lg:hidden">
					<!-- <my-button> -->
					<Button onClick="toggle()" style="primary" size="lg">
						<span x-text="open ? 'Mostra Meno' : 'Mostra Altro'"></span>
					</Button>
					<!-- </my-button> -->
				</div>
			</Col>
		</Row>
	</div>
</Section>

<!-- <script>
	let showMore = false

	class MyButton extends HTMLElement {
		connectedCallback() {
			let b = this.querySelector('Button')
			let extraCards = document.getElementsByClassName('extra-cards')
			if (b) {
				b.addEventListener('click', (e) => {
					showMore = !showMore

					if (extraCards) {
						if (showMore) {
							// show and reset animation state
							for (let el of extraCards) {
								el.classList.remove('hidden')
								el.classList.add('flex')
								el.classList.remove('scroll-animated')
							}
							// force reflow to reset animations
							void document.body.offsetWidth
							// re-apply animation with staggered delays
							Array.from(extraCards).forEach((el, i) => {
								setTimeout(() => el.classList.add('scroll-animated'), i * 100)
							})
							b.textContent = 'Mostra Meno'
						} else {
							// hide and clear animation classes
							for (let el of extraCards) {
								el.classList.remove('scroll-animated')
								el.classList.add('hidden')
								el.classList.remove('flex')
							}
							b.textContent = 'Mostra Altro'
						}
					}

					;(b as HTMLElement).blur()
					e.preventDefault()
				})
			}
		}
	}

	customElements.define('my-button', MyButton)
</script> -->
